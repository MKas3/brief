generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int     @id @default(autoincrement())
  email    String  @unique
  password String
  name     String
  avatar   String?
  role     Role    @default(USER)
  orders   Order[]
  briefs   Brief[]
  isGoogle Boolean @default(false)
}

model Brief {
  id                  Int          @id @default(autoincrement())
  title               String?
  companyClasses      String?
  description         String?
  emotions            String?
  interactionChannels String?
  clientDescription   String?
  concurrents         String?
  worth               String?
  styleExamples       String?
  experiments         Int?
  endPeople           Int?
  lastAction          Int?
  images              BriefImage[]
  author              User         @relation(fields: [userId], references: [id])
  userId              Int
  Order               Order[]
}

model Order {
  id       Int       @id() @default(autoincrement())
  executor User?     @relation(fields: [userId], references: [id])
  price    Price
  deadline DateTime?
  progress Progress  @default(PENDING)
  brief    Brief     @relation(fields: [briefId], references: [id])
  briefId  Int
  userId   Int?
}

model BriefImage {
  id      Int    @id @default(autoincrement())
  path    String
  brief   Brief? @relation(fields: [briefId], references: [id])
  briefId Int?
}

enum Role {
  USER
  ADMIN
}

enum Price {
  DEFAULT
  PRO
  PREMIUM
}

enum Progress {
  PENDING
  IN_PROGRESS
  DONE
}
